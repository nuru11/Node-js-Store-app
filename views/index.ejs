<%- include("parts/header") %>
<%- include("parts/navbar") %>  

<div class="container">

    <form method="GET" action="/">
      <select name="category" class="form-control" style="margin-top: 10px">
        <option value="all">all</option>
        <option value="clothes">clothes</option>
        <option value="phones">phones</option>
        <option value="computers">computers</option>
      </select>
      <input type="submit" style="margin-top: 10px" class="btn btn-primary" value="filter" />
    </form>
    <% if(postCartValidationError) {%>
      <% for(let p of postCartValidationError){ %>
          <div class="alert alert-danger"><%= p.msg %></div>
        <% } %>
      <% } %>
    <% if(products.length === 0) { %>
      <div>there is on product</div>
    <% } else {%>
      <div class="row">
        <% for(let product of products) { %>  

      <div class="col col-12 col-md-6 col-lg-4 col-xl-3" style="margin-bottom: 10px; margin-top: 10px">
          <div class="card" style="width: 18rem;">
            <img src="/<%= product.image %>" class="card-img-top" width="40" height="190"> 
           <div class="card-body">
                <h5 class="card-title">
                  <a href="/product/<%=product._id%>"><%= product.name%></a>
                </h5>
               
               <p><%= product.price %></p> 
               <form action="/cart" method="POST">
                  <input type="number" name="amount" class="form-control" value="1"/>
                  <input type="hidden" name="name" value="<%= product.name %>" />
                  <input type="hidden" name="price" value="<%= product.price %>" />
                  <input type="hidden" name="productId" value="<%= product._id %>" />
                  <input type="hidden" name="redirectTo" value="/" />
                  <input type="submit" value="add to cart" class="btn btn-primary"/>
               </form>
              </div>
                   </div>
      </div>
      
     <% } %>
  
      <% } %>
  </div>
  </div> 
<%- include("parts/footer") %> 